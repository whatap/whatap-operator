1. 폐쇄망 환경에서 operator 설치
   whatap-operator-1.7.6.tgz 을 다운받아 사용하더라도, 해당 파일 내부 values.yaml 파일에는 아래와 같이 public.ecr 을 찾는 repository가 선언되어 있습니다.
   이에 whatap-operator 이미지도 별도로 다운받아 내부 registry에 업로드 후, 해당 부분 수정이 필요할 듯합니다.
   해당 whatap-operator의 공식 이미지는 어디서 다운받을 수 있으며(고객 전달용),
   whatap-operator-1.7.6.tgz 파일을 다운받아values.yaml 파일을 계속 수정하여 사용해야하는 지, helm install을 이용하여 whatap-operator을 설치할 때 별도 방법이 있는 지 문의드립니다.


```
namespace: ""

image:

  repository: public.ecr.aws/whatap/whatap-operator

  tag: latest

  pullPolicy: Always

 

# Image pull secret for private registries

imagePullSecret:

  name: # registryKey

 

# Pod scheduling and priority options for the operator

priorityClassName: ""

nodeName: ""

nodeSelector: {}

affinity: {}

tolerations: []

 

credentials:

  create: false

  # The secret name is fixed to 'whatap-credentials'

  license: "" # <license-key>

  host: ""    # <whatap-server-host>

  port: 6600   # <whatap-server-port>

~
```
2. whatap-webhook 이 API 서버에 과도한 부하를 발생(해당 내용은 KT 고객 개발환경에 적용을 하면서, 고객이 직접 문의를 주신 내용입니다.
   내용이 혼동이 있을까 문의 받은 내용을 그대로 전달 드립니다.)

```
# KT 문의내용

WhatAp Operator가 무한 reconcile 루프에 빠져 whatap-webhook MutatingWebhookConfiguration을 지속적으로 업데이트합니다. generation 필드가 초당 수십 회 증가하며(관측값: 2초에 40회 이상), API 서버에 과도한 부하를 발생시킵니다.

 

2초 간격으로 webhook 설정을 비교한 결과:

 

  5c5

  <   generation: 8188

  ---

  >   generation: 8228

 

  # matchExpressions 순서가 변경됨:

  31,34d30

  <     - key: kubernetes.azure.com/managedby

  <       operator: NotIn

  <       values:

  <       - aks

  38a35,38

  >     - key: kubernetes.azure.com/managedby

  >       operator: NotIn

  >       values:

 

배열 요소는 동일하지만 순서만 다릅니다.

 

  Operator 로그:

 

  2025-10-20T04:41:42Z INFO Setting controller reference for resource

    {"resourceType": "MutatingWebhookConfiguration", "resourceName": "whatap-webhook"}

  2025-10-20T04:41:42Z INFO Reconciling WhatapAgent

[약 100ms마다 지속적으로 반복됨]
```

3. logsink_enabled=true 설정 방법(단순 문의사항입니다.)
   whatap-operator 설치 시, whatap-node-agent 에 logsink_enabled=true 설정할 수 있는 방법이 있다면 알고싶습니다. (기존에는 node-start-script configMap에 설정)
