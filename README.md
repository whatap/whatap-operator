# Whatap Operator

Whatap Operator는 Kubernetes 클러스터에서 Whatap 모니터링 에이전트의 배포 및 관리를 간소화하는 Kubernetes 오퍼레이터입니다.

## 설명

Whatap Operator는 다음과 같은 Whatap 모니터링 구성 요소의 설치, 구성 및 수명 주기 관리를 자동화합니다:

- **Master Agent**: Kubernetes 클러스터 리소스를 모니터링합니다.
- **Node Agent**: Kubernetes 노드 및 컨테이너를 모니터링합니다
- **Open Agent**: 다양한 소스에서 Prometheus 스타일 메트릭을 수집합니다
- **APM Instrumentation**: 애플리케이션 포드에 APM 에이전트를 자동으로 주입합니다

이 오퍼레이터는 Custom Resource Definition(CRD)을 사용하여 모니터링 에이전트의 원하는 상태를 정의하므로, Kubernetes 네이티브 방식으로 Whatap 모니터링을 쉽게 배포하고 구성할 수 있습니다.

## 문서

### 빠른 시작

Whatap Operator를 배포하고 사용하는 방법에 대한 빠른 소개는 [빠른 시작 가이드](docs/quick-start.md)를 참조하세요. 빠른 시작 가이드는 최소한의 설명으로 Whatap Operator를 신속하게 설치하고 기본적인 모니터링을 구성하는 방법을 안내합니다.

### 사용자 가이드

애플리케이션 및 인프라에 대한 Whatap 모니터링을 구성하려면 [사용자 가이드](docs/user-guide.md)를 참조하세요. 사용자 가이드는 다양한 구성 옵션과 고급 기능에 대한 자세한 설명을 포함하고 있어, Whatap 모니터링을 보다 세부적으로 구성하고자 하는 사용자에게 적합합니다.

### 구성 예제

다양한 모니터링 구성 예제는 [구성 예제](examples/README.ko.md)를 참조하세요. 이 예제들은 라벨, 어노테이션, 톨러레이션 등의 사용자 정의 설정 방법도 포함하고 있습니다.

## 사용자 정의 및 마이그레이션

### 사용자 정의 설정

Whatap Operator는 다음과 같은 사용자 정의 설정을 지원합니다:

- **라벨 및 어노테이션**: 리소스와 파드 템플릿에 사용자 정의 라벨과 어노테이션을 추가할 수 있습니다.
- **톨러레이션**: 특정 노드에서만 에이전트가 실행되도록 톨러레이션을 설정할 수 있습니다.
- **환경 변수**: 에이전트 컨테이너에 사용자 정의 환경 변수를 추가할 수 있습니다.
- **리소스 요구사항**: CPU 및 메모리 요청/제한을 사용자 정의할 수 있습니다.

이러한 설정은 WhatapAgent CR에서 직접 지정하거나, 오퍼레이터가 생성한 리소스를 `kubectl patch` 명령으로 수정할 수 있습니다. 자세한 내용은 [구성 예제](examples/README.ko.md)를 참조하세요.

### 수동 설치에서 오퍼레이터로 마이그레이션

기존에 YAML 파일을 사용하여 수동으로 Whatap 에이전트를 설치한 경우, 기존 에이전트를 제거하고 Whatap Operator를 설치를 권장합니다.
기존 리소스가 이미 설치된 경우 CR에 정의된 내용을 우선으로 적용하여, 정의된 내용과 다른 경우 update 를 진행하게 됩니다.
